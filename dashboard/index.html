<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link href='https://fonts.googleapis.com/css?family=Roboto:100,400' rel='stylesheet' type='text/css'>

    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="js/circles.min.js"></script>
    <script src="js/socket.io.js"></script>

    <script>
        $(document).ready(function () {
            var speedGraph = Circles.create({
                id:           'speed-graph',
                radius:       100,
                value:        0,
                maxValue:     40,
                width:        2,
                text:         function(value){return value + '<br><span>km/h</span>';},
                colors:       ['rgba(255, 255, 255, 0.1)', '#24dbd6'],
                duration:     200,
                textClass:    'circle-graph-text',
                styleText:    true
            });

            var steeringGraph = Circles.create({
                id:           'steering-graph',
                radius:       100,
                value:        0,
                maxValue:     90,
                width:        2,
                text:         function(value){return value + '<br><span>Grad</span>';},
                colors:       ['rgba(255, 255, 255, 0.1)', '#24dbd6'],
                duration:     200,
                textClass:    'circle-graph-text',
                styleText:    true
            });

            var brakeGraph = Circles.create({
                id:           'brake-graph',
                radius:       100,
                value:        0,
                maxValue:     100,
                width:        2,
                text:         function(value){return value + '<br><span>Prozent</span>';},
                colors:       ['rgba(255, 255, 255, 0.1)', '#24dbd6'],
                duration:     200,
                textClass:    'circle-graph-text',
                styleText:    true
            });

            var socket = io.connect('http://192.168.0.20:3000');
            socket.on('connect', function () {
                $('#connection-status--text').text("Verbunden");
                $('#connection-status--led').removeClass('yellow').addClass('green');
            });
            socket.on('speed', function (data) {
                console.log(data);
                speedGraph.update(Math.floor(data.kmPerHour));
            });
        });
    </script>
</head>
<body>
    <header>
        <div id="connection-status">
            <span id="connection-status--text">Verbindung wird hergestellt...</span>
            <i id="connection-status--led" class="yellow"></i>
        </div>
    </header>
    <div id="speed-panel" class="panel">
        <div class="wrapper">
            <h3>Geschwindigkeit</h3>
            <div class="content">
                <div id="speed-graph"></div>
            </div>
        </div>
    </div>
    <div id="steering-panel" class="panel">
        <div class="wrapper">
            <h3>Lenkeinschlag</h3>
            <div class="content">
                <div id="steering-graph"></div>
            </div>
        </div>
    </div>
    <div id="brake-panel" class="panel">
        <div class="wrapper">
            <h3>Bremskraft</h3>
            <div class="content">
                <div id="brake-graph"></div>
            </div>
        </div>
    </div>
    <div id="speed-time-panel" class="panel">
        <div class="wrapper">
            <h3>Geschwindigkeit-Zeit-Verlauf</h3>
        </div>
    </div>
</body>
</html>